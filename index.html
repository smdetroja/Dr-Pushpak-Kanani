<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Dr. Pushpak Kanani â€“ Patient Record</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #eaeaea;
      padding: 20px;
    }

    .letterhead {
      background: #ffffff;
      max-width: 900px;
      margin: auto;
      min-height: 1000px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      position: relative;
      padding: 40px 40px 120px 40px;
    }

    .top-section {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .doctor-info { color: #532058; }
    .doctor-info h1 { margin: 0; font-size: 24px; }
    .doctor-info p { margin: 4px 0; font-size: 14px; }

    .form-section { margin-top: 30px; }
    label { display: block; margin-top: 8px; font-weight: bold; }

    input, textarea {
      width: 100%;
      padding: 6px;
      margin-top: 4px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 14px;
      box-sizing: border-box;
    }
    textarea { min-height: 80px; }

    button {
      margin-top: 25px;
      padding: 12px 25px;
      background: #6a2c70;
      color: white;
      border: none;
      font-size: 16px;
      cursor: pointer;
      border-radius: 4px;
    }
    button:hover { background: #532058; }

    .footer {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      background: #f6e7d8;
      border-top: 10px solid #6a2c70;
      padding: 15px 30px;
      font-size: 13px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-sizing: border-box;
    }
    .footer-left { display: flex; align-items: center; gap: 10px; }
    .logo { width: 45px; height: 45px; border-radius: 50%; background: #6a2c70; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; }
    .footer-right span { display: block; }

    .doctor-photo-wrapper { width:150px; text-align:center; }
    .doctor-date { margin-top:8px; font-size:12px; color:#532058; }

    .grid-row { display: flex; gap: 20px; margin-top: 20px; }
    .box { border: 2px solid #6a2c70; border-radius: 6px; padding: 10px; background: #fafafa; flex: 1; box-sizing: border-box; }
    .box h3 { margin-top: 0; color: #532058; margin-bottom: 10px; font-size: 16px; }
    .patient-info-box { flex: 1.3; }
  </style>
</head>
<body>

  <div class="letterhead">

    <div class="top-section">
      <div class="doctor-info">
        <h1>Dr. Pushpak M Kanani</h1>
        <p>Consultant Physician</p>
        <p>MBBS, MD (DNB Family Medicine)</p>
        <p>ðŸ“ž +91 70114 19597</p>
        
      </div>
      <div class="doctor-photo-wrapper">
        <img src="doctor.jpg" alt="Doctor" style="width:100%; border-radius:10px;" />
        <div id="currentDate" class="doctor-date"></div>
      </div>
    </div>

    <form id="patientForm" class="form-section">

      <div class="grid-row">
        <div class="box">
          <h3>Symptoms</h3>
          <textarea id="symptoms" rows="20" placeholder="Enter patient symptoms here..."></textarea>
        </div>
        <div class="box patient-info-box">
          <h3>Patient Information</h3>
          <label>Name *</label>
          <input type="text" id="iname" required />
          <label>Mobile Number *</label>
          <input type="tel" id="mobile" required />
          <label>Blood Group *</label>
          <input type="text" id="bloodgroup" required />
          <label>Address *</label>
          <textarea id="address" rows="3" required></textarea>
          <label>Age *</label>
          <input type="number" id="age" required />
          <label>Gender *</label>
          <input type="text" id="gender" required />
        </div>
      </div>

      <div class="grid-row">
        <div class="box">
          <h3>Vitals</h3>
          <textarea id="vitals" rows="10" placeholder="Enter vitals like BP, Pulse, Temperature..."></textarea>
        </div>
        <div class="box">
          <h3>Examinations / Diagnosis</h3>
          <textarea id="diagnosis" rows="10" placeholder="Enter examination findings or diagnosis..."></textarea>
        </div>
      </div>

      <div class="grid-row">
        <div class="box" style="flex:1;">
          <h3>Advice / Prescription</h3>
          <textarea id="prescription" rows="10" placeholder="Enter advice or prescription here..."></textarea>
        </div>
      </div>

      <div style="display:flex; justify-content: space-between; align-items:center; margin-top:25px;">
        <button type="submit">Save as PDF</button>
        <img src="signature.png" alt="Doctor Signature" style="height:60px; opacity:0.9;" />
      </div>
    </form>

    <div class="footer">
      <div class="footer-left">
        <div class="logo">DR</div>
        <div>pushpakkanani18@gmail.com</div>
      </div>
      <div class="footer-right">
        <span>Gurugram, Haryana 122001</span>
        <span>+91 70114 19597</span>
      </div>
    </div>

  </div>

<script>
  const { jsPDF } = window.jspdf;

  document.addEventListener("DOMContentLoaded", function() {
      const dateDiv = document.getElementById("currentDate");
      const today = new Date();
      const options = { year: 'numeric', month: 'long', day: 'numeric' };
      dateDiv.textContent = today.toLocaleDateString('en-IN', options);
  });

  document.getElementById("patientForm").addEventListener("submit", function(e) {
    e.preventDefault();

    const doc = new jsPDF("p", "mm", "a4");
    const pageWidth = doc.internal.pageSize.getWidth();
    const margin = 15;
    let y = 20;
    const today = new Date();
    const options = { year: 'numeric', month: 'long', day: 'numeric' };
    const formattedDate = today.toLocaleDateString('en-IN', options);

    const data = {
      iname: iname.value,
      mobile: mobile.value,
      bloodgroup: bloodgroup.value,
      address: address.value,
      age: age.value,
      gender: gender.value,
      symptoms: symptoms.value,
      vitals: vitals.value,
      diagnosis: diagnosis.value,
      prescription: prescription.value,
      formattedDate: formattedDate 
    };

    /* ---------- HEADER ---------- */
    doc.setFont("times", "bold");
    doc.setFontSize(16);
    doc.text("Dr. Pushpak M Kanani", margin, y);

    doc.setFontSize(11);
    doc.setFont("times", "normal");
    y += 6;
    doc.text("Consultant Physician", margin, y);
    y += 5;
    doc.text("MBBS, MD (DNB Family Medicine)", margin, y);
    y += 5;
    doc.text("+91 70114 19597", margin, y);
    y += 5;
    doc.text(`Date: ${formattedDate}`, margin, y);

    /* ---------- PATIENT INFO (RIGHT) ---------- */
    const rightX = pageWidth - margin - 80;
    let py = 20;

    doc.setFont("times", "bold");
    doc.text("Patient Information", rightX, py);
    doc.setFont("times", "normal");
    py += 6;

    doc.setFontSize(10);
    doc.text(`Name: ${data.iname}`, rightX, py); 
    py += 5;

    doc.text(`Age: ${data.age}    Gender: ${data.gender}`, rightX, py);
    py += 5;

    doc.text(`Mobile: ${data.mobile}    Blood Group: ${data.bloodgroup}`, rightX, py);
    py += 5;

    const addressText = doc.splitTextToSize(
      `Address: ${data.address}`,
      85
    );
    doc.text(addressText, rightX, py);


    /* ---------- DIVIDER ---------- */
    y = 55;
    doc.line(margin, y, pageWidth - margin, y);
    y += 8;

    /* ---------- SECTION FUNCTION ---------- */
    function section(title, content) {
      doc.setFont("times", "bold");
      doc.setFontSize(13);
      doc.text(title, margin, y);
      y += 6;

      doc.setFont("times", "normal");
      doc.setFontSize(11);
      const text = doc.splitTextToSize(content || "-", pageWidth - margin * 2);
      doc.text(text, margin, y);
      y += text.length * 10;
    }

    section("Symptoms", data.symptoms);
    section("Vitals", data.vitals);
    section("Examination / Diagnosis", data.diagnosis);
    section("Advice / Prescription", data.prescription);

    /* ---------- FOOTER ---------- */
    doc.setFontSize(9);
    doc.setFont("times", "normal");
    doc.text(
      "Gurugram, Haryana 122001  |  pushpakkanani18@gmail.com  |  +91 70114 19597",
      pageWidth / 2,
      285,
      { align: "center" }
    );

    doc.save(`${data.iname}_${data.mobile}_${data.formattedDate}.pdf`);
  });
</script>


</body>
</html>
